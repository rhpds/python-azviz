digraph AzureTopology {
    // Graph attributes
    rankdir="LR";
    splines="polyline";
    bgcolor="white";
    fontname="Arial";
    fontsize="10";
    fontcolor="black";
    dpi="300";
    concentrate=false;
    compound=true;
    newrank=true;
    ordering="out";
    esep="+15";
    sep="+10";
    nodesep="0.5";
    ranksep="0.4";
    size="12,8!";
    ratio="compress";
    pack="true";
    packmode="clust";
    // Default node attributes
    node [
        shape=box,
        style=filled,
        fillcolor="lightblue",
        fontname="Arial",
        fontsize="10",
        fontcolor="black",
        color="black",
        height="1.2",
        width="1.8",
        margin="0.1"
    ];
    // Default edge attributes
    edge [
        fontname="Arial",
        fontsize="8",
        fontcolor="black",
        color="black"
    ];

    // Subscription Title (compact, minimal padding, background color)
    "subscription_title" [
        label="Subscription Name: RHPDS Subscription - DEV\nSubscription ID: 6fb7b9cd-ae20-47a9-801b-dd7f824f86a0",
        shape="box",
        style="filled",
        fillcolor="white",
        fontname="Arial",
        fontsize="10",
        fontcolor="black",
        color="white",
        penwidth="0",
        height="0.4",
        width="4.0",
        margin="0.02",
        labeljust="l",
        labelloc="t"
    ];



    // Master container encompassing all content
    subgraph cluster_master {
        label="";
        style="solid";
        color="lightgray";
        margin="10";

      subgraph cluster_main {
          label="Azure Resources";
          style="dashed";
          color="gray";
          margin="2";

          // Resource group title (external, left-justified)
          "title_gpte-infra" [
              label="Resource Group: gpte-infra",
              shape="plaintext",
              fontsize="10",
              fontcolor="black",
              height="0.3",
              width="3.0",
              margin="0",
              labeljust="l"
          ];

          subgraph "cluster_gpte-infra" {
              label="";
              style="filled";
              fillcolor="lightgray";
              fontcolor="black";
              rankdir="LR";
              margin="1";

              // Priority 99 resources
              "keyvault_rhpds_guid_dev_kv_vaults" [label=<<TABLE border="0" cellborder="0" cellpadding="1" cellspacing="0" BGCOLOR="white"><TR><TD ALIGN="center" colspan="2" height="32" width="64"><img src="/home/prutledg/python-azviz/src/azviz/icons/azure_icons/General Service Icons/keyvaults.png"/></TD></TR><TR><TD align="center" colspan="2"><B><FONT POINT-SIZE="11">rhpds-guid-dev-kv</FONT></B></TD></TR><TR><TD align="right"><FONT POINT-SIZE="9">Provider:</FONT></TD><TD align="left"><FONT POINT-SIZE="9">KeyVault</FONT></TD></TR><TR><TD align="right"><FONT POINT-SIZE="9">Type:</FONT></TD><TD align="left"><FONT POINT-SIZE="9">vaults</FONT></TD></TR></TABLE>>, fillcolor="white", shape="box", penwidth="1", style="filled", color="black", fontname="Arial", resource_group="gpte-infra", location="eastus", ranking=99];
              "network_dev_azure_opentlc_com_dnszones" [label=<<TABLE border="0" cellborder="0" cellpadding="1" cellspacing="0" BGCOLOR="white"><TR><TD ALIGN="center" colspan="2" height="32" width="64"><img src="/home/prutledg/python-azviz/src/azviz/icons/azure_icons/General Service Icons/appservices.png"/></TD></TR><TR><TD align="center" colspan="2"><B><FONT POINT-SIZE="11">dev.azure.opentlc.com</FONT></B></TD></TR><TR><TD align="right"><FONT POINT-SIZE="9">Provider:</FONT></TD><TD align="left"><FONT POINT-SIZE="9">Network</FONT></TD></TR><TR><TD align="right"><FONT POINT-SIZE="9">Type:</FONT></TD><TD align="left"><FONT POINT-SIZE="9">dnszones</FONT></TD></TR></TABLE>>, fillcolor="white", shape="box", penwidth="1", style="filled", color="black", fontname="Arial", resource_group="gpte-infra", location="global", ranking=1];
              {rank=same; "keyvault_rhpds_guid_dev_kv_vaults"; "network_dev_azure_opentlc_com_dnszones";}


              // VM-Storage inline horizontal placement
          }


          // Position external resource group titles
          "title_gpte-infra" -> "keyvault_rhpds_guid_dev_kv_vaults" [style=invis, weight=100, minlen=1];
      }

    }



    // Position subscription title above master container
    {rank=min; "subscription_title";}
    "subscription_title" -> "title_gpte-infra" [style=invis, weight=100, minlen=1];


}
